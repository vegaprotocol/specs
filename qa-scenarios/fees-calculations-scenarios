Feature - Fees Calculations

# Test Scenarios -

Scenario : Fees Calculations 
Given I have open orders on my account during cont. & auction sessions
When the order gets matched resulting in one or multple trades 
Then each fee is correctly calculated in settlement currency of the market as below -
  infrastructure_fee = fee_factor[infrastructure] * trade_value_for_fee_purposes
  maker_fee =  fee_factor[maker]  * trade_value_for_fee_purposes
  liquidity_fee = fee_factor[liquidity] * trade_value_for_fee_purposes
  total_fee = infrastructure_fee + maker_fee + liquidity_fee
  trade_value_for_fee_purposes = = size_of_trade * price_of_trade
  
  Seperate Scenario for below -
  Realistic values might be: fee_factor[liquidity] = 0.001 = 0.1%, fee_factor[infrastructure] = 0.0005 = 0.05%, fee_factor[maker] = 0.00025 = 0.025% 
  
Scenario : General Account Balance during cont. & auction sessions
Given the orders are matched and trades get created
When each of 3 fees are calculated for the trade 
Then the money is collected from general account

Scenario : Insuffcient General Account Balance during cont. & auction sessions
Given the orders are matched and trades get created
When each of 3 fees are calculated for the trade
And general account balance is insufficient to cover full / part of all 3 fees or total_fee
Then the money is collected from Margin account in the below order of priority - 
  maker_fee (or as much as possible)
  then infrastructure_fee (or as much as possible)
  and then liquidity_fee

Scenario : Insuffcient General and & Margin Account Balance
Given the orders are matched and trades get created
When each of 3 fees are calculated for the trade
And general & margin account balance is insufficient to cover full / part of all 3 fees or total_fee
Then
  During cont. session - Matched trades should be discarded and any orders on the book (that would have been hit) should remain in place with previous remaining size intact
  AND the incoming order should be rejected with not enough fees error
  During Normal auction sessions - The fee is distributed so that the infrastructure_fee is paid first and only then the liquidity_fee

Scenario : No maker,taker relationship between the trading parties in Auction (No Price maker)
Given the markets are in Normal Auctions (including market protection and opening auctions) 
When the orders are matched and trades get created
Then for the trade
  maker_fee = 0
  infrastructure_fee and liquidity_fee = Spilt 1/2 between both parties / takers
  
  During Continuous Trading - Do I need to tackle this ?
  The "aggressor or price taker" pays the fee.
  The "passive or price maker" party is the participant in the trade whose order was hit (i.e. on the order book prior to the uncrossing that caused this trade)

Scenario : Position Resoultion : When trades are netted off against each other
Given I have open orders
When the trades are netted off against each other
Then No fees are incured 
And all parties share the total fee for the network order, pro-rated by the size of position. 

Factoring the rounding criteria 
